{
  "info": {
    "name": "BidKhong Auction API",
    "description": "Complete API collection for BidKhong online auction platform. Import this into Postman to test all endpoints.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "BidKhong"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{auth_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://127.0.0.1:8000/api",
      "type": "string"
    },
    {
      "key": "auth_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "product_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "user_id",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('auth_token', jsonData.token);",
                  "    pm.collectionVariables.set('user_id', jsonData.user.id);",
                  "    pm.environment.set('auth_token', jsonData.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "register"
              ]
            },
            "description": "Register a new user. Auto-creates wallet with 0 balance."
          },
          "response": []
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('auth_token', jsonData.token);",
                  "    pm.collectionVariables.set('user_id', jsonData.user.id);",
                  "    pm.environment.set('auth_token', jsonData.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/login",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "login"
              ]
            },
            "description": "Login with email and password. Returns user object and bearer token."
          },
          "response": []
        },
        {
          "name": "Get Current User (Me)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/me",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "me"
              ]
            },
            "description": "Get current authenticated user information with wallet."
          },
          "response": []
        },
        {
          "name": "Logout",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/logout",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "logout"
              ]
            },
            "description": "Logout and invalidate current token."
          },
          "response": []
        },
        {
          "name": "Upload Profile Image",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "profile_image",
                  "type": "file",
                  "src": "",
                  "description": "Profile image file (max 2MB, jpeg/png/jpg/gif/webp)"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/profile/image",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "profile",
                "image"
              ]
            },
            "description": "Upload or update profile image. Replaces existing image if any. Max 2MB."
          },
          "response": []
        },
        {
          "name": "Forgot Password",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john@example.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/forgot-password",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "forgot-password"
              ]
            },
            "description": "Request password reset token. Returns token in response (in production would be sent via email)."
          },
          "response": []
        },
        {
          "name": "Reset Password",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john@example.com\",\n  \"token\": \"PASTE_TOKEN_FROM_FORGOT_PASSWORD\",\n  \"password\": \"newpassword123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/reset-password",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "reset-password"
              ]
            },
            "description": "Reset password using token from forgot-password. Token valid for 60 minutes. All sessions will be logged out."
          },
          "response": []
        }
      ],
      "description": "User authentication endpoints"
    },
    {
      "name": "Categories",
      "item": [
        {
          "name": "Get All Categories",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/categories",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "categories"
              ]
            },
            "description": "Get all categories with their subcategories."
          },
          "response": []
        },
        {
          "name": "Get Single Category",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/categories/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "categories",
                "1"
              ]
            },
            "description": "Get a single category with its subcategories."
          },
          "response": []
        },
        {
          "name": "Get All Subcategories",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/subcategories",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "subcategories"
              ]
            },
            "description": "Get all subcategories."
          },
          "response": []
        }
      ],
      "description": "Category management endpoints"
    },
    {
      "name": "Products",
      "item": [
        {
          "name": "Get All Products",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/products",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "products"
              ]
            },
            "description": "Get all active products. Supports query params: ?search=iphone&category_id=1&subcategory_id=2&min_price=1000&max_price=50000&location=Bangkok&status=active&sort=price_asc (sort options: price_asc, price_desc, newest, ending_soon)"
          },
          "response": []
        },
        {
          "name": "Search Products",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/products?search=iphone&sort=price_asc",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "products"
              ],
              "query": [
                {
                  "key": "search",
                  "value": "iphone"
                },
                {
                  "key": "sort",
                  "value": "price_asc"
                },
                {
                  "key": "category_id",
                  "value": "1",
                  "disabled": true
                },
                {
                  "key": "min_price",
                  "value": "1000",
                  "disabled": true
                },
                {
                  "key": "max_price",
                  "value": "50000",
                  "disabled": true
                },
                {
                  "key": "status",
                  "value": "active",
                  "disabled": true
                },
                {
                  "key": "location",
                  "value": "Bangkok",
                  "disabled": true
                }
              ]
            },
            "description": "Search and filter products. Enable/disable query params as needed."
          },
          "response": []
        },
        {
          "name": "Get Product Detail",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('product_id', jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/products/{{product_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "products",
                "{{product_id}}"
              ]
            },
            "description": "Get single product with details."
          },
          "response": []
        },
        {
          "name": "Create Product",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('product_id', jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "name",
                  "value": "iPhone 15 Pro",
                  "type": "text"
                },
                {
                  "key": "description",
                  "value": "Brand new, sealed in box",
                  "type": "text"
                },
                {
                  "key": "starting_price",
                  "value": "30000",
                  "type": "text"
                },
                {
                  "key": "min_price",
                  "value": "32000",
                  "type": "text"
                },
                {
                  "key": "buyout_price",
                  "value": "45000",
                  "type": "text"
                },
                {
                  "key": "auction_end_time",
                  "value": "2026-02-15 18:00:00",
                  "type": "text"
                },
                {
                  "key": "category_id",
                  "value": "1",
                  "type": "text"
                },
                {
                  "key": "subcategory_id",
                  "value": "1",
                  "type": "text"
                },
                {
                  "key": "location",
                  "value": "Bangkok",
                  "type": "text"
                },
                {
                  "key": "picture",
                  "type": "file",
                  "src": "",
                  "description": "Product image (max 5MB, jpeg/png/jpg/gif/webp, optional)"
                },
                {
                  "key": "images[]",
                  "type": "file",
                  "src": "",
                  "description": "Additional product images (max 5 files, each max 5MB, optional)"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/products",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "products"
              ]
            },
            "description": "Create a new auction product. Requires authentication."
          },
          "response": []
        },
        {
          "name": "Delete Product Image",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/products/{{product_id}}/images/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "products",
                "{{product_id}}",
                "images",
                "1"
              ]
            },
            "description": "Delete a single image from a product. Only product owner can delete. Replace '1' with actual image ID."
          },
          "response": []
        }
      ],
      "description": "Product management endpoints"
    },
    {
      "name": "Bidding",
      "item": [
        {
          "name": "Place Bid",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"price\": 35000\n}"
            },
            "url": {
              "raw": "{{base_url}}/products/{{product_id}}/bid",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "products",
                "{{product_id}}",
                "bid"
              ]
            },
            "description": "Place a bid on a product. Validates: auction not expired, price > current_price, price >= min_price, sufficient balance."
          },
          "response": []
        },
        {
          "name": "Get Product Bid History",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/products/{{product_id}}/bids",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "products",
                "{{product_id}}",
                "bids"
              ]
            },
            "description": "Get all bids for a specific product, ordered by price DESC."
          },
          "response": []
        },
        {
          "name": "Get My Bid History",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users/me/bids",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "users",
                "me",
                "bids"
              ]
            },
            "description": "Get all bids placed by current user."
          },
          "response": []
        }
      ],
      "description": "Bidding system endpoints"
    },
    {
      "name": "Wallet",
      "item": [
        {
          "name": "Top Up Wallet",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": 100000\n}"
            },
            "url": {
              "raw": "{{base_url}}/wallet/topup",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "wallet",
                "topup"
              ]
            },
            "description": "Add funds to user wallet. Amount must be > 0."
          },
          "response": []
        }
      ],
      "description": "Wallet management endpoints"
    },
    {
      "name": "Orders",
      "item": [
        {
          "name": "Get My Orders",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users/me/orders",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "users",
                "me",
                "orders"
              ]
            },
            "description": "Get all orders for current user (won auctions)."
          },
          "response": []
        },
        {
          "name": "Close Auction (Manual)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/products/{{product_id}}/close",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "products",
                "{{product_id}}",
                "close"
              ]
            },
            "description": "Manually close auction and create order for winner. Only product owner can close."
          },
          "response": []
        },
        {
          "name": "Verify Order",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/orders/1/verify",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "orders",
                "1",
                "verify"
              ]
            },
            "description": "Mark order as verified. Only order owner can verify."
          },
          "response": []
        }
      ],
      "description": "Order management endpoints"
    },
    {
      "name": "Notifications",
      "item": [
        {
          "name": "Get All Notifications",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/notifications",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "notifications"
              ]
            },
            "description": "Get all notifications for current user."
          },
          "response": []
        },
        {
          "name": "Get Unread Notifications",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/notifications/unread",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "notifications",
                "unread"
              ]
            },
            "description": "Get only unread notifications for current user."
          },
          "response": []
        },
        {
          "name": "Mark Notification as Read",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/notifications/1/read",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "notifications",
                "1",
                "read"
              ]
            },
            "description": "Mark a single notification as read."
          },
          "response": []
        },
        {
          "name": "Mark All as Read",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/notifications/read-all",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "notifications",
                "read-all"
              ]
            },
            "description": "Mark all notifications as read for current user."
          },
          "response": []
        }
      ],
      "description": "Notification system endpoints"
    }
  ]
}